The program architecture was implemented according to the MVC architectural pattern. The Engine_Analizer class is the main class, in the MVC model it corresponds to the controller. The Engine_Analizer class works with the user and receives requests from him, then passes them to the Spectrogram_Analysis class, which acts as a model. Let's look at some of the main methods of the Engine_Analizer class.

The download_spectrogrum method, which is located in the Engine_Analizer class, is responsible for downloading the audio recording and converting the audio recording into a spectrogram. During the execution of the method, the program first interacts with the user and opens a file selection dialogue box. After the user selects a file, the program checks whether the file exists on the computer. If the file does not exist, the method ends. If it does, the program loads the file and decomposes it into an audio signal and a sample rate. After that, we use STFT (Short Time Fourier Transform) to create a spectrogram. Once the spectrogram is created, the system visualises it. Then the method ends by returning the audio signal and sample rate for use in other methods of the class.

The analyse_spectrogram method is used to analyse a sound recording and detect problems in a car engine. This method first checks whether the audio recording has been loaded and whether a spectrogram has been created. If the audio file has not been loaded, an error message is displayed and the method is terminated. If the sound recording was loaded, then the Breakdown_Analysis method of the Spectrogram_Analysis class is executed, which returns a list of faults found by the method.

In addition to spectrograms, the program can also plot spectra (frequency dependence on amplitude). As with the spectrogram, a file selection dialog box appears first. After the user selects a file, the program checks whether such a file exists on the computer. If the file does not exist, the method is terminated. If it does exist, the program loads the file and decomposes it into an audio signal and a sample rate. Then the Fourier series is calculated. Since the Fourier transform for real signals is symmetric, only the positive part of the spectrum can be analysed. After creating the spectrogram, the system visualises it. Then the method completes its work and returns the audio signal and sample rate for use in other methods of the class.

There is a Spectrogram_Analysis class for data analysis. In the MVC architectural pattern, it corresponds to the model. There are several methods in the Spectrogram_Analysis class, the main one is the Breakdown_Analysis method. In the Breakdown_Analysis method, the system compares the record uploaded by the user with the records in its own library. If there is a match, it notifies the user. To understand the principle of comparison, look at the cosinus_compare_spectrgrum method. 
The cosinus_compare_spectrgrum method uses cosine similarity.  Cosine similarity works as follows: first, the value vectors are calculated, and then the angle between the vectors is compared. If the angle is small (the vectors look in approximately the same direction), then they are similar. The cosinus_compare_spectrgrum method uses the cut_sound and normalize_spectrogram methods.

The cut_sound method compares two sound recordings and cuts the longer one. The normalise_spectrogram method normalises the data. The normalisation process involves aligning the amplitude levels of the spectrograms so that they are in the same range of values. To normalise: first, the minimum and maximum values in the spectrogram are determined. Then, each value in the spectrogram is reduced by spectrogram_min so that the minimum value is 0. The result is then divided by (spectrogram_max - spectrogram_min) so that the maximum value is 1. The resulting value is multiplied by (max_val - min_val) to change the scale of the values, and min_val is added to shift the range so that the minimum value is min_val and the maximum value is max_val.

The Console class is responsible for presenting data, and corresponds to View in the MVC architectural pattern. The class provides an interface and the GetAnswer method for displaying the application response.
